---
import type { GetStaticPathsOptions } from "astro";
import DigestList from "../components/DigestList.astro";
import { getAllDigestEntries } from "../components/digest";
import { getPageTitle, mainDescription } from "../components/pageTitle";
import Layout from "../layouts/Layout.astro";

export const getStaticPaths = async ({ paginate }: GetStaticPathsOptions) => {
  return paginate(await getAllDigestEntries(), { pageSize: 6 });
};

const { page } = Astro.props;
---

<Layout
  title={getPageTitle("Articles")}
  description={mainDescription}
  pageType="website"
>
  <div class="flex flex-col gap-y-8">
    <DigestList digests={page.data} />
    <div
      class="text-sm w-full relative text-stone-500
      *:px-4 *:py-2 *:border *:rounded-full *:border-stone-300
      transition-all duration-300
      hover:text-cyan-700 hover:drop-shadow-sm"
    >
      {
        page.url.prev && (
          <a href={page.url.prev} class="absolute left-0">
            Previous Page
          </a>
        )
      }
      {
        page.url.next && (
          <a href={page.url.next} class="absolute right-0">
            Next Page
          </a>
        )
      }
    </div>
  </div>
</Layout>
